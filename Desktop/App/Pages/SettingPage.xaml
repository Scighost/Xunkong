<Page x:Class="Xunkong.Desktop.Pages.SettingPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:ani="using:CommunityToolkit.WinUI.UI.Animations"
      xmlns:behavior="using:CommunityToolkit.WinUI.UI.Behaviors"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:interaction="using:Microsoft.Xaml.Interactions.Core"
      xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
      xmlns:labs="using:CommunityToolkit.Labs.WinUI"
      xmlns:local="using:Xunkong.Desktop.Pages"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:ui="using:CommunityToolkit.WinUI.UI"
      xmlns:xdc="using:Xunkong.Desktop.Controls"
      xmlns:xdm="using:Xunkong.Desktop.Models"
      x:DefaultBindMode="OneWay"
      mc:Ignorable="d">

    <Page.Resources>
        <Thickness x:Key="SettingsCardPadding">16,16,60,16</Thickness>
        <Thickness x:Key="SettingsExpanderItemPadding">58,8,60,8</Thickness>
        <Thickness x:Key="ClickableSettingsExpanderItemPadding">58,8,32,8</Thickness>
        <Thickness x:Key="SettingsExpanderItemBorderThickness">0,0,0,0</Thickness>
    </Page.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition MaxWidth="1200" />
            <ColumnDefinition />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>


        <ScrollViewer Grid.Row="1"
                      Grid.ColumnSpan="2"
                      Padding="24,0,24,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition MaxWidth="1200" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel Margin="0,24,0,24" Spacing="4">


                    <!--  介绍与好评  -->
                    <Grid Height="120" ColumnSpacing="16">
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Border Grid.RowSpan="2"
                                Height="120"
                                HorizontalAlignment="Left"
                                ui:UIElementExtensions.ClipToBounds="True"
                                CornerRadius="8">
                            <Image x:Name="_Image_RecommendWallpaper"
                                   Width="220"
                                   Height="120"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Top"
                                   ui:VisualExtensions.NormalizedCenterPoint="0.5"
                                   Source="ms-appx:///Assets/Images/102203689_p0_thumb.jpg"
                                   Stretch="UniformToFill"
                                   Tapped="_Image_RecommendWallpaper_Tapped">
                                <ani:Explicit.Animations>
                                    <ani:AnimationSet x:Name="PointerEnteredAnimation">
                                        <ani:ScaleAnimation EasingMode="EaseOut"
                                                            EasingType="Circle"
                                                            To="1.1"
                                                            Duration="0:0:1.5" />
                                    </ani:AnimationSet>
                                    <ani:AnimationSet x:Name="PointerExitedAnimation">
                                        <ani:ScaleAnimation EasingMode="EaseOut"
                                                            EasingType="Circle"
                                                            To="1"
                                                            Duration="0:0:0.6" />
                                    </ani:AnimationSet>
                                </ani:Explicit.Animations>
                            </Image>
                            <interactivity:Interaction.Behaviors>
                                <interaction:EventTriggerBehavior EventName="PointerEntered">
                                    <behavior:StartAnimationAction Animation="{x:Bind PointerEnteredAnimation}" />
                                </interaction:EventTriggerBehavior>
                                <interaction:EventTriggerBehavior EventName="PointerExited">
                                    <behavior:StartAnimationAction Animation="{x:Bind PointerExitedAnimation}" />
                                </interaction:EventTriggerBehavior>
                            </interactivity:Interaction.Behaviors>
                        </Border>
                        <TextBlock Grid.Column="1"
                                   Margin="0,4,0,0"
                                   TextWrapping="Wrap">
                            <Run Text="记录旅途中发生的事，觉得好用就给个" />
                            <Hyperlink Click="Hyperlink_Click"
                                       NavigateUri="ms-windows-store://review/?ProductId=9N2SVG0JMT12"
                                       UnderlineStyle="None">
                                <Run Text="好评" />
                            </Hyperlink>
                            <Run Text="或" />
                            <Hyperlink NavigateUri="https://github.com/xunkong/xunkong" UnderlineStyle="None">Star</Hyperlink>
                            <Run Text="吧。" />
                        </TextBlock>
                        <TextBlock Grid.Column="1"
                                   Margin="0,32,0,0"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                   TextWrapping="Wrap">
                            <Run FontSize="12" Text="アナ - 原神2周年記念" />
                            <LineBreak />
                            <Run FontSize="12" Text="おめでとうございます！これからも旅人と共に、星と深淵を目指せ！" />
                        </TextBlock>
                        <StackPanel Grid.Row="1"
                                    Grid.Column="1"
                                    Orientation="Horizontal"
                                    Spacing="8">
                            <TextBlock Margin="0,0,4,0"
                                       VerticalAlignment="Center"
                                       Text="相关链接" />
                            <HyperlinkButton Name="HyperlinkButton_UpdateContent"
                                             Click="HyperlinkButton_UpdateContent_Click"
                                             Content="更新记录" />
                            <HyperlinkButton Content="反馈和建议" NavigateUri="https://github.com/xunkong/xunkong/issues/new/choose" />
                            <HyperlinkButton Name="HyperlinkButton_OpenStore"
                                             Click="HyperlinkButton_OpenStore_Click"
                                             Content="商店页面" />
                            <HyperlinkButton Content="赞助开发者" NavigateUri="https://xunkong.cc/donate/" />
                        </StackPanel>
                    </Grid>




                    <!--  版本与外观  -->
                    <TextBlock Margin="0,20,0,4"
                               FontSize="20"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                               Text="版本与外观" />


                    <!--  检查更新  -->
                    <labs:SettingsExpander Description="{x:Bind AppVersion}" Header="{x:Bind AppName}">
                        <labs:SettingsExpander.HeaderIcon>
                            <ImageIcon Margin="-6" Source="ms-appx:///Assets/Logos/StoreLogo.png">
                                <ToolTipService.ToolTip>
                                    <Image Source="ms-appx:///Assets/Logos/logo.png" />
                                </ToolTipService.ToolTip>
                            </ImageIcon>
                        </labs:SettingsExpander.HeaderIcon>
                        <Button Margin="0,0,16,0"
                                Command="{x:Bind CheckUpdateCommand, Mode=OneTime}"
                                Content="检查更新" />
                        <labs:SettingsExpander.Items>
                            <!--  预览版更新提醒  -->
                            <labs:SettingsCard Description="预览版包含正在测试的功能，通过 GitHub 分发" Header="预览版更新提醒">
                                <ToggleSwitch IsEnabled="{x:Bind CanEditPrerelease}"
                                              IsOn="{x:Bind EnablePrerelease, Mode=TwoWay}"
                                              Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                        </labs:SettingsExpander.Items>
                    </labs:SettingsExpander>


                    <!--  应用主题  -->
                    <labs:SettingsCard Description="跟随系统选项在应用重启后生效" Header="应用主题">
                        <labs:SettingsCard.HeaderIcon>
                            <FontIcon x:Name="FontIcon_Theme"
                                      FontSize="20"
                                      Glyph="&#xE793;" />
                        </labs:SettingsCard.HeaderIcon>
                        <ComboBox SelectedIndex="{x:Bind SelectedThemeIndex, Mode=TwoWay}">
                            <ComboBoxItem Content="跟随系统" />
                            <ComboBoxItem Content="浅色模式" />
                            <ComboBoxItem Content="深色模式" />
                        </ComboBox>
                    </labs:SettingsCard>


                    <!--  窗口背景材质  -->
                    <labs:SettingsExpander Description="应该能在 Windows 10 上用了吧" Header="窗口背景材质">
                        <labs:SettingsExpander.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xE7F8;" />
                        </labs:SettingsExpander.HeaderIcon>
                        <ComboBox MinWidth="104"
                                  Margin="0,0,16,0"
                                  SelectedIndex="{x:Bind WindowBackdropIndex, Mode=TwoWay}">
                            <ComboBoxItem Content="None" />
                            <ComboBoxItem Content="Mica" />
                            <ComboBoxItem Content="Acrylic" />
                            <ComboBoxItem Content="Mica Alt" />
                        </ComboBox>
                        <labs:SettingsExpander.Items>
                            <!--  始终激活背景  -->
                            <labs:SettingsCard Description="窗口失去焦点时不会回退为纯色" Header="始终激活背景">
                                <ToggleSwitch IsOn="{x:Bind AlwaysActiveBackdrop, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                        </labs:SettingsExpander.Items>
                    </labs:SettingsExpander>


                    <!--  主页壁纸  -->
                    <labs:SettingsExpander Description="精心挑选的同人*图" Header="主页壁纸">
                        <labs:SettingsExpander.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xE91B;" />
                        </labs:SettingsExpander.HeaderIcon>
                        <ToggleSwitch Margin="0,0,16,0"
                                      IsOn="{x:Bind EnableHomePageWallpaper, Mode=TwoWay}"
                                      Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                        <labs:SettingsExpander.Items>
                            <!--  使用按流量计费的网络时下载新图片  -->
                            <labs:SettingsCard Description="默认不启用，不用再担心流量偷跑啦" Header="使用按流量计费的网络时下载新图片">
                                <ToggleSwitch IsOn="{x:Bind DownloadWallpaperOnMeteredInternet, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                            <!--  使用自定义图片  -->
                            <labs:SettingsCard Description="把图片文件托到主页的图片区域即可" Header="使用自定义图片">
                                <ToggleSwitch IsOn="{x:Bind UseCustomWallpaper, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                            <!--  保存位置  -->
                            <labs:SettingsCard Description="{x:Bind WallpaperSaveFolder}" Header="保存位置">
                                <Button Command="{x:Bind ChangeWallpaperSaveFolderCommand, Mode=OneTime}" Content="修改路径" />
                            </labs:SettingsCard>
                            <!--  图片格式  -->
                            <labs:SettingsCard Description="推荐并且默认使用 avif 格式，jpg 格式兼容性最佳，不推荐使用 png 格式" Header="图片格式">
                                <StackPanel Orientation="Horizontal" Spacing="12">
                                    <Button Width="32"
                                            Height="32"
                                            Padding="0"
                                            Content="&#xE9CE;"
                                            FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                            Style="{ThemeResource DateTimePickerFlyoutButtonStyle}">
                                        <Button.Flyout>
                                            <Flyout>
                                                <StackPanel Spacing="8">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Width="48" />
                                                        <TextBlock Width="80" Text="文件大小" />
                                                        <TextBlock Width="80" Text="图像质量" />
                                                        <TextBlock Width="80" Text="解码速度" />
                                                        <TextBlock Text="所需额外组件" />

                                                    </StackPanel>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Width="48"
                                                                   VerticalAlignment="Center"
                                                                   Text="jpg" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A; &#xEA3A; &#xEA3A;"
                                                                   VariableSizedWrapGrid.ColumnSpan="3" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A; &#xEA3A; &#xEA3A;" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A; &#xEA3A; &#xEA3A; &#xEA3A;" />
                                                        <TextBlock FontSize="12" Text="无" />
                                                    </StackPanel>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Width="48"
                                                                   VerticalAlignment="Center"
                                                                   Text="png" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A; &#xEA3A; &#xEA3A; &#xEA3A; &#xEA3A;" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A; &#xEA3A; &#xEA3A; &#xEA3A;" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A; &#xEA3A; &#xEA3A; &#xEA3A;" />
                                                        <TextBlock FontSize="12" Text="无" />
                                                    </StackPanel>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Width="48"
                                                                   VerticalAlignment="Center"
                                                                   Text="webp" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A; &#xEA3A;" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A; &#xEA3A; &#xEA3A; &#xEA3A;" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A; &#xEA3A;" />
                                                        <TextBlock FontSize="12" IsTextSelectionEnabled="True">
                                                            <Hyperlink Click="Hyperlink_Click"
                                                                       NavigateUri="ms-windows-store://pdp/?productid=9PG2DK419DRG"
                                                                       UnderlineStyle="None">
                                                                <Run Text="Webp 图像扩展" />
                                                            </Hyperlink>
                                                        </TextBlock>
                                                    </StackPanel>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Width="48"
                                                                   VerticalAlignment="Center"
                                                                   Text="avif" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A;" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A; &#xEA3A; &#xEA3A; &#xEA3A;" />
                                                        <TextBlock Width="80"
                                                                   VerticalAlignment="Center"
                                                                   FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                                   FontSize="10"
                                                                   Text="&#xEA3A;" />
                                                        <TextBlock FontSize="12" IsTextSelectionEnabled="True">
                                                            <Hyperlink Click="Hyperlink_Click"
                                                                       NavigateUri="ms-windows-store://pdp/?productid=9PMMSR1CGPWG"
                                                                       UnderlineStyle="None">
                                                                <Run Text="HEIF 图像扩展" />
                                                            </Hyperlink>
                                                            <LineBreak />
                                                            <Hyperlink Click="Hyperlink_Click"
                                                                       NavigateUri="ms-windows-store://pdp/?productid=9MVZQVXJBQ9V"
                                                                       UnderlineStyle="None">
                                                                <Run Text="AV1 Video Extension" />
                                                            </Hyperlink>
                                                        </TextBlock>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Flyout>
                                        </Button.Flyout>
                                    </Button>
                                    <ComboBox SelectedItem="{x:Bind WallpaperRequestFormat, Mode=TwoWay}">
                                        <ComboBox.Items>
                                            <x:String>jpg</x:String>
                                            <x:String>png</x:String>
                                            <x:String>webp</x:String>
                                            <x:String>avif</x:String>
                                        </ComboBox.Items>
                                    </ComboBox>
                                </StackPanel>
                            </labs:SettingsCard>
                            <!--  刷新壁纸信息  -->
                            <labs:SettingsCard Description="重新获取本地所有壁纸的信息" Header="刷新壁纸信息">
                                <Button Command="{x:Bind RefreshLocalWallpaperInfosCommand, Mode=OneTime}" Content="刷新壁纸信息" />
                            </labs:SettingsCard>
                        </labs:SettingsExpander.Items>
                    </labs:SettingsExpander>




                    <!--  功能  -->
                    <TextBlock Margin="0,20,0,4"
                               FontSize="20"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                               Text="功能" />


                    <!--  启动游戏  -->
                    <labs:SettingsExpander Description="也可以在开始菜单的寻空图标上点击右键快速启动" Header="启动游戏">
                        <labs:SettingsExpander.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xE768;" />
                        </labs:SettingsExpander.HeaderIcon>
                        <Button Margin="0,0,16,0"
                                Command="{x:Bind StartGameCommand, Mode=OneTime}"
                                Content="启动游戏" />
                        <labs:SettingsExpander.Items>
                            <!--  默认启动程序  -->
                            <labs:SettingsCard Description="点击启动游戏时打开哪个程序" Header="默认启动程序">
                                <ComboBox Width="100" SelectedIndex="{x:Bind GameServerIndex, Mode=TwoWay}">
                                    <ComboBoxItem Content="国服" />
                                    <ComboBoxItem Content="国际服" />
                                    <ComboBoxItem Content="云原神" />
                                </ComboBox>
                            </labs:SettingsCard>
                            <!--  国服路径  -->
                            <labs:SettingsCard Description="{x:Bind GameExePathCN}" Header="国服 YuanShen.exe 路径">
                                <Button Command="{x:Bind ChangeGameExePathCommand, Mode=OneTime}"
                                        CommandParameter="0"
                                        Content="选择文件" />
                            </labs:SettingsCard>
                            <!--  国际服路径  -->
                            <labs:SettingsCard Description="{x:Bind GameExePathGlobal}" Header="国际服 GenshinImpact.exe 路径">
                                <Button Command="{x:Bind ChangeGameExePathCommand, Mode=OneTime}"
                                        CommandParameter="1"
                                        Content="选择文件" />
                            </labs:SettingsCard>
                            <!--  云原神路径  -->
                            <labs:SettingsCard Description="{x:Bind GameExePathCNCloud}" Header="云原神 Genshin Impact Cloud Game.exe 路径">
                                <Button Command="{x:Bind ChangeGameExePathCommand, Mode=OneTime}"
                                        CommandParameter="2"
                                        Content="选择文件" />
                            </labs:SettingsCard>
                            <!--  解锁帧数上限  -->
                            <labs:SettingsCard Header="解锁帧数上限">
                                <labs:SettingsCard.Description>
                                    <TextBlock Foreground="{ThemeResource SystemFillColorCautionBrush}" Text="此功能会修改游戏内存，有一定的风险，设定值超过60才会启用" />
                                </labs:SettingsCard.Description>
                                <NumberBox MinWidth="100"
                                           Minimum="60"
                                           SmallChange="10"
                                           SpinButtonPlacementMode="Compact"
                                           Value="{x:Bind UnlockedFPS, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            </labs:SettingsCard>
                            <!--  窗口宽度  -->
                            <labs:SettingsCard Description="为 0 时忽略此项设置" Header="窗口宽度">
                                <NumberBox Width="100"
                                           Minimum="0"
                                           Value="{x:Bind StartGameWindowWidth, Mode=TwoWay}" />
                            </labs:SettingsCard>
                            <!--  窗口高度  -->
                            <labs:SettingsCard Description="为 0 时忽略此项设置" Header="窗口高度">
                                <NumberBox Width="100"
                                           Minimum="0"
                                           Value="{x:Bind StartGameWindowHeight, Mode=TwoWay}" />
                            </labs:SettingsCard>
                            <!--  使用无边框窗口  -->
                            <labs:SettingsCard Description="此设置项不涉及以全屏独占方式运行游戏" Header="使用无边框窗口">
                                <ToggleSwitch IsOn="{x:Bind UsePopupWindow, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                            <!--  检查参量质变仪和洞天宝钱  -->
                            <labs:SettingsCard Description="启动游戏成功后，检查所有账号上述两项的状态" Header="检查参量质变仪和洞天宝钱">
                                <ToggleSwitch IsOn="{x:Bind CheckTransformerAndHomeCoinWhenStartGame, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                        </labs:SettingsExpander.Items>
                    </labs:SettingsExpander>


                    <!--  米游社签到  -->
                    <labs:SettingsExpander Description="因为米游社的风控限制，签到功能不再维护" Header="米游社签到">
                        <labs:SettingsExpander.HeaderIcon>
                            <PathIcon Data="M901.784183 130.096944l-71.520459 0 0-91.948962c0-21.034552-17.113446-38.147998-38.147998-38.147998l-2.548388 0c-21.031241 0-38.141375 17.11179-38.141375 38.147998l0 91.948962-475.285176 0 0-91.948962c0-21.034552-17.11179-38.147998-38.147998-38.147998l-2.548388 0c-21.034552 0-38.147998 17.11179-38.147998 38.147998l0 91.948962-75.087209 0c-66.715116 0-120.991315 54.276199-120.991315 120.991315L1.217878 902.998766c0 66.720084 54.276199 121.001251 120.991315 121.001251l779.573334 0c66.720084 0 120.999595-54.281167 120.999595-121.001251l0-651.908851C1022.780466 184.374799 968.499299 130.096944 901.784183 130.096944zM946.487782 944.986733l-867.617748 0L78.870034 404.68371l867.617748 0L946.487782 944.986733zM946.487782 324.319235l-867.617748 0 0-117.927951 867.617748 0L946.487782 324.319235zM408.749706 873.666635c6.794046 6.794046 15.696018 10.188585 24.597991 10.188585 6.029033 0 12.041507-1.596261 17.414814-4.710958 3.086547-1.602885 5.98598-3.690941 8.575765-6.280726L811.395053 520.810071c13.584781-13.586437 13.584781-35.612857 0-49.197637-13.586437-13.584781-35.612857-13.584781-49.199293 0L433.644098 800.165752 267.310017 633.830015c-13.586437-13.584781-35.611201-13.584781-49.197637 0-13.584781 13.586437-13.584781 35.611201 0 49.197637L408.749706 873.666635z" />
                        </labs:SettingsExpander.HeaderIcon>
                        <labs:SettingsExpander.Items>
                            <!--  应用启动时自动签到  -->
                            <labs:SettingsCard Description="签到成功时不会有提示" Header="应用启动时自动签到">
                                <ToggleSwitch IsOn="{x:Bind SignInAllAccountsWhenStartUpApplication, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                            <!--  后台定时签到  -->
                            <labs:SettingsCard Description="每日 06:00 ~ 06:15 随机运行，若超出该时间则立刻运行" Header="后台定时签到">
                                <ToggleSwitch IsOn="{x:Bind IsRegisterCheckInScheduler, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                        </labs:SettingsExpander.Items>
                    </labs:SettingsExpander>


                    <!--  主页功能  -->
                    <labs:SettingsExpander Description="主页内的相关设置在这里" Header="主页功能">
                        <labs:SettingsExpander.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xE10F;" />
                        </labs:SettingsExpander.HeaderIcon>
                        <labs:SettingsExpander.Items>
                            <!--  实时便笺  -->
                            <labs:SettingsCard Description="同时对所有账号生效" Header="实时便笺">
                                <ToggleSwitch IsOn="{x:Bind DisableDailyNotesInHomePage, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                            <!--  实时便笺缓存时间  -->
                            <labs:SettingsCard Description="减少网络请求次数，尽量避免验证账号" Header="实时便笺缓存时间（分钟）">
                                <NumberBox Width="100"
                                           SmallChange="1"
                                           SpinButtonPlacementMode="Compact"
                                           Value="{x:Bind DailyNoteCacheMinutes, Mode=TwoWay}" />
                            </labs:SettingsCard>
                            <!--  实时便笺账号单独设置  -->
                            <labs:SettingsCard Description="可针对单个账号在主页开启或关闭实时便笺显示" Header="实时便笺账号单独设置">
                                <Button Command="{x:Bind NavigateToDailyNoteSettingPageCommand}" Content="前往设置" />
                            </labs:SettingsCard>
                            <!--  留影叙佳期  -->
                            <!--<labs:SettingsCard Description="测试阶段默认关闭" Header="留影叙佳期">
                                <ToggleSwitch IsOn="{x:Bind EnableBirthdayStarInHomePage, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>-->
                            <!--  即将结束的活动  -->
                            <labs:SettingsCard Description="3天之内将要结束的活动" Header="即将结束的活动">
                                <ToggleSwitch IsOn="{x:Bind EnableFinishingActivityInHomePage, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                        </labs:SettingsExpander.Items>
                    </labs:SettingsExpander>


                    <!--  网页快捷方式  -->
                    <labs:SettingsCard Description="在左侧导航栏中添加网页快捷方式" Header="网页快捷方式">
                        <labs:SettingsCard.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xE12B;" />
                        </labs:SettingsCard.HeaderIcon>
                        <Button Command="{x:Bind NavigateToWebToolEditPageCommand, Mode=OneTime}" Content="前往设置" />
                    </labs:SettingsCard>


                    <!--  自动刷新磁贴  -->
                    <labs:SettingsExpander Description="关闭后可以通过点击磁贴手动更新" Header="自动更新实时便笺磁贴内容">
                        <labs:SettingsExpander.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xECA5;" />
                        </labs:SettingsExpander.HeaderIcon>
                        <ToggleSwitch Margin="0,0,16,0"
                                      HorizontalAlignment="Right"
                                      IsOn="{x:Bind EnableDailyNoteTask, Mode=TwoWay}"
                                      Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                        <labs:SettingsExpander.Items>
                            <!--  磁贴更新时间间隔  -->
                            <labs:SettingsCard Description="不得小于15分钟" Header="磁贴更新时间间隔">
                                <NumberBox Width="100"
                                           Minimum="15"
                                           SmallChange="1"
                                           SpinButtonPlacementMode="Compact"
                                           Value="{x:Bind DailyNoteTaskTimeInterval, Mode=TwoWay}" />
                            </labs:SettingsCard>
                        </labs:SettingsExpander.Items>
                    </labs:SettingsExpander>


                    <!--  其他功能  -->
                    <labs:SettingsExpander Description="一些很少使用到的功能" Header="其他功能">
                        <labs:SettingsExpander.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xE154;" />
                        </labs:SettingsExpander.HeaderIcon>
                        <labs:SettingsExpander.Items>
                            <!--  显示新手祈愿统计  -->
                            <labs:SettingsCard Description="满足一些欧皇的需求" Header="显示新手祈愿统计">
                                <ToggleSwitch IsOn="{x:Bind ShowNoviceWishType, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                            <!--  使用旧版我的角色页面  -->
                            <labs:SettingsCard Description="旧版我的角色页面不再维护" Header="使用旧版我的角色页面">
                                <ToggleSwitch IsOn="{x:Bind UseCharacterPageOldVersion, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                            <!--  隐藏未上线的角色  -->
                            <labs:SettingsCard Description="在角色图鉴中不显示未上线的角色" Header="隐藏未上线的角色">
                                <ToggleSwitch IsOn="{x:Bind HideUnusableCharacter, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                            <!--  页面缓存  -->
                            <labs:SettingsCard Description="开启后部分页面不再重复加载，但是应用占用的内存会增加" Header="页面缓存">
                                <ToggleSwitch IsOn="{x:Bind EnableNavigationCache, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                            </labs:SettingsCard>
                        </labs:SettingsExpander.Items>
                    </labs:SettingsExpander>




                    <!--  数据  -->
                    <TextBlock Margin="0,20,0,4"
                               FontSize="20"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                               Text="数据" />


                    <!--  使用 AppCenter 上传事件日志  -->
                    <labs:SettingsCard Description="上传的内容中不包含个人数据，且仅用于统计各功能的使用情况" Header="上传事件日志">
                        <labs:SettingsCard.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xE3D7;" />
                        </labs:SettingsCard.HeaderIcon>
                        <ToggleSwitch IsOn="{x:Bind AgreeTrackEventByAppCenter, Mode=TwoWay}" Style="{ThemeResource RightAlignToggleSwitchStyle}" />
                    </labs:SettingsCard>


                    <!--  数据文件夹  -->
                    <labs:SettingsExpander Description="请妥善保管好您的个人数据" Header="数据文件夹">
                        <labs:SettingsExpander.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xE8B7;" />
                        </labs:SettingsExpander.HeaderIcon>
                        <labs:SettingsExpander.Items>
                            <!--  用户数据文件夹  -->
                            <labs:SettingsCard Description="{x:Bind UserDataPath}" Header="用户数据文件夹">
                                <Button Command="{x:Bind OpenUserDataPathCommand, Mode=OneTime}" Content="打开文件夹" />
                            </labs:SettingsCard>
                            <!--  截图备份文件夹  -->
                            <labs:SettingsCard Description="{x:Bind GameScreenshotBackupFolder}" Header="截图备份文件夹">
                                <Button Command="{x:Bind ChangeScreenshotBackupFolderCommand, Mode=OneTime}" Content="选择文件夹" />
                            </labs:SettingsCard>
                        </labs:SettingsExpander.Items>
                    </labs:SettingsExpander>


                    <!--  文件缓存  -->
                    <labs:SettingsExpander Description="{x:Bind TotalCacheSizeString}" Header="文件缓存">
                        <labs:SettingsExpander.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xE81E;" />
                        </labs:SettingsExpander.HeaderIcon>
                        <Button Margin="0,0,16,0"
                                Command="{x:Bind ClearCacheCommand, Mode=OneTime}"
                                CommandParameter="ClearAll"
                                Content="全部清除" />
                        <labs:SettingsExpander.Items>
                            <!--  图片缓存  -->
                            <labs:SettingsCard Description="{x:Bind ImageCacheSizeString}" Header="图片缓存">
                                <Button Command="{x:Bind ClearCacheCommand, Mode=OneTime}"
                                        CommandParameter="ClearImage"
                                        Content="清除缓存" />
                            </labs:SettingsCard>
                            <!--  语音缓存  -->
                            <labs:SettingsCard Description="{x:Bind VoiceCacheSizeString}" Header="语音缓存">
                                <Button Command="{x:Bind ClearCacheCommand, Mode=OneTime}"
                                        CommandParameter="ClearVoice"
                                        Content="清除缓存" />
                            </labs:SettingsCard>
                            <!--  缩略图缓存  -->
                            <labs:SettingsCard Description="{x:Bind ThumbnailCacheSizeString}" Header="缩略图缓存">
                                <Button Command="{x:Bind ClearCacheCommand, Mode=OneTime}"
                                        CommandParameter="ClearThumbnail"
                                        Content="清除缓存" />
                            </labs:SettingsCard>
                        </labs:SettingsExpander.Items>
                    </labs:SettingsExpander>


                    <!--  预缓存图片  -->
                    <labs:SettingsCard Description="点击开始下载后会在屏幕右下角弹出进度通知" Header="预缓存所有图片">
                        <labs:SettingsCard.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xE8B9;" />
                        </labs:SettingsCard.HeaderIcon>
                        <Button Command="{x:Bind StartPreCacheAllImagesCommand, Mode=OneTime}" Content="开始下载" />
                    </labs:SettingsCard>


                    <!--  手动更新原神数据  -->
                    <labs:SettingsCard Description="{x:Bind UpdateGenshinDataText}" Header="手动更新本地原神数据">
                        <labs:SettingsCard.HeaderIcon>
                            <FontIcon FontSize="20" Glyph="&#xE895;" />
                        </labs:SettingsCard.HeaderIcon>
                        <Button Command="{x:Bind UpdateGenshinDataCommand, Mode=OneTime}" Content="手动更新" />
                    </labs:SettingsCard>




                </StackPanel>



            </Grid>


        </ScrollViewer>




    </Grid>
</Page>
